(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{80:function(t,e,n){"use strict";n.r(e);var c=n(1),i=n.n(c),r=n(45),a=n.n(r),s=n(46),u="csrf-token",o="CSRF-Token";function j(t){var e;return null===(e=document.cookie.split("; ").find((function(e){return(null===e||void 0===e?void 0:e.split("=")[0])===t})))||void 0===e?void 0:e.split("=")[1]}var b=n.n(s).a.create({headers:[{name:o,value:j(u)}].reduce((function(t,e){return e.value&&(t[e.name]=e.value),t}),{})}),d=b,l=n(28),O=n(84),h=n(5),p=n(0);var v=function(t){var e=t.toy,n=t.onSubmit,c={name:e?e.name:"",price:e?e.price:""};return Object(p.jsx)(h.c,{initialValues:c,validate:function(){return{}},onSubmit:n,children:function(t){var e=t.isSubmitting;return Object(p.jsxs)(h.b,{children:[Object(p.jsx)(h.a,{type:"text",name:"name",placeholder:"Name"}),Object(p.jsx)(h.a,{type:"text",name:"price",placeholder:"Price"}),Object(p.jsx)("button",{type:"submit",disabled:e,children:"Submit"})]})}})},x=n(8);var f=function(){var t=Object(l.b)(),e=Object(x.f)(),n=Object(O.a)((function(t){return d.post("/api/v1/toys",t)}),{onSuccess:function(){t.invalidateQueries("toys")}});return Object(p.jsx)(v,{onSubmit:function(t,c){var i=c.setSubmitting;n.mutate(t),null===i||void 0===i||i(!1),e.push("/toys")}})},m=n(83);function g(t){var e=t.toy,n=t.handleEdit,c=t.handleDelete,i=t.handleDetail;return Object(p.jsxs)(p.Fragment,{children:[e.name,Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"button",onClick:function(){return i(e)},children:"detail"}),Object(p.jsx)("button",{type:"button",onClick:function(){return n(e)},children:"edit"}),Object(p.jsx)("button",{type:"button",onClick:function(){return c(e)},children:"delete"})]})}var y=function(){var t,e,n=Object(x.f)(),c=Object(l.b)(),i=Object(m.a)("toys",(function(){return d.get("/api/v1/toys").then((function(t){return t.data}))})),r=Object(O.a)((function(t){var e=t.id;return d.delete("/api/v1/toys/".concat(e))}),{onSuccess:function(){c.invalidateQueries("toys")}}),a=function(t){var e=t.id;n.push("/toys/update/".concat(e))},s=function(t){var e=t.id;r.mutate({id:e})},u=function(t){var e=t.id;n.push("/toys/detail/".concat(e))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:[null===(t=i.data)||void 0===t?void 0:t.length," toys"]}),Object(p.jsx)("ul",{children:null===(e=i.data)||void 0===e?void 0:e.map((function(t){return Object(p.jsx)("li",{children:Object(p.jsx)(g,{toy:t,handleDelete:s,handleEdit:a,handleDetail:u})},t.id)}))})]})};var k=function(){var t=Object(x.g)().id,e=Object(m.a)(["toys",t],(function(){return d.get("/api/v1/toys/".concat(t)).then((function(t){return t.data}))})),n=e.data;if(e.isLoading)return Object(p.jsx)("div",{children:"Loading..."});var c=n;return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:c.name}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:c.price}),Object(p.jsx)("br",{})]})};var S=function(){var t=Object(x.g)().id,e=Object(l.b)(),n=Object(x.f)(),c=Object(m.a)(["toys",t],(function(){return d.get("/api/v1/toys/".concat(t)).then((function(t){return t.data}))})),i=c.data,r=c.isLoading,a=Object(O.a)((function(e){return d.put("/api/v1/toys/".concat(t),e).then((function(t){return t.data}))}),{onSuccess:function(){e.invalidateQueries("toys")}});if(r)return Object(p.jsx)("div",{children:"Loading..."});var s=i;return Object(p.jsx)(v,{toy:s,onSubmit:function(t,e){var c=e.setSubmitting;a.mutate(t),null===c||void 0===c||c(!1),n.push("/toys")}})};var w=function(t){var e=t.ticket,n=t.onSubmit,c={number:e?e.number:""};return Object(p.jsx)(h.c,{initialValues:c,validate:function(){return{}},onSubmit:n,children:function(t){var e=t.isSubmitting;return Object(p.jsxs)(h.b,{children:[Object(p.jsx)(h.a,{type:"text",name:"number",placeholder:"Number"}),Object(p.jsx)("button",{type:"submit",disabled:e,children:"Submit"})]})}})};var C=function(){var t=Object(l.b)(),e=Object(x.f)(),n=Object(O.a)((function(t){return d.post("/api/v1/tickets",t)}),{onSuccess:function(){t.invalidateQueries("tickets")}});return Object(p.jsx)(w,{onSubmit:function(t,c){var i=c.setSubmitting;n.mutate(t),null===i||void 0===i||i(!1),e.push("/tickets")}})};function L(t){var e=t.ticket,n=t.handleEdit,c=t.handleDelete,i=t.handleDetail;return Object(p.jsxs)(p.Fragment,{children:[e.number,Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"button",onClick:function(){return i(e)},children:"detail"}),Object(p.jsx)("button",{type:"button",onClick:function(){return n(e)},children:"edit"}),Object(p.jsx)("button",{type:"button",onClick:function(){return c(e)},children:"delete"})]})}var D=function(){var t,e,n=Object(x.f)(),c=Object(l.b)(),i=Object(m.a)("tickets",(function(){return d.get("/api/v1/tickets").then((function(t){return t.data}))})),r=Object(O.a)((function(t){var e=t.id;return d.delete("/api/v1/tickets/".concat(e))}),{onSuccess:function(){c.invalidateQueries("tickets")}}),a=function(t){var e=t.id;n.push("/tickets/update/".concat(e))},s=function(t){var e=t.id;r.mutate({id:e})},u=function(t){var e=t.id;n.push("/tickets/detail/".concat(e))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:[null===(t=i.data)||void 0===t?void 0:t.length," tickets"]}),Object(p.jsx)("ul",{children:null===(e=i.data)||void 0===e?void 0:e.map((function(t){return Object(p.jsx)("li",{children:Object(p.jsx)(L,{ticket:t,handleDelete:s,handleEdit:a,handleDetail:u})},t.id)}))})]})};var Q=function(){var t=Object(x.g)().id,e=Object(m.a)(["tickets",t],(function(){return d.get("/api/v1/tickets/".concat(t)).then((function(t){return t.data}))})),n=e.data;if(e.isLoading)return Object(p.jsx)("div",{children:"Loading..."});var c=n;return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:c.number}),Object(p.jsx)("br",{})]})};var E=function(){var t=Object(x.g)().id,e=Object(l.b)(),n=Object(x.f)(),c=Object(m.a)(["tickets",t],(function(){return d.get("/api/v1/tickets/".concat(t)).then((function(t){return t.data}))})),i=c.data,r=c.isLoading,a=Object(O.a)((function(e){return d.put("/api/v1/tickets/".concat(t),e).then((function(t){return t.data}))}),{onSuccess:function(){e.invalidateQueries("tickets")}});if(r)return Object(p.jsx)("div",{children:"Loading..."});var s=i;return Object(p.jsx)(w,{ticket:s,onSubmit:function(t,e){var c=e.setSubmitting;a.mutate(t),null===c||void 0===c||c(!1),n.push("/tickets")}})};var F=function(t){var e=t.user,n=t.onSubmit,c={username:e?e.username:"",passwordHash:e?e.passwordHash:""};return Object(p.jsx)(h.c,{initialValues:c,validate:function(){return{}},onSubmit:n,children:function(t){var e=t.isSubmitting;return Object(p.jsxs)(h.b,{children:[Object(p.jsx)(h.a,{type:"text",name:"username",placeholder:"Username"}),Object(p.jsx)(h.a,{type:"text",name:"passwordHash",placeholder:"PasswordHash"}),Object(p.jsx)("button",{type:"submit",disabled:e,children:"Submit"})]})}})};var N=function(){var t=Object(l.b)(),e=Object(x.f)(),n=Object(O.a)((function(t){return d.post("/api/v1/users",t)}),{onSuccess:function(){t.invalidateQueries("users")}});return Object(p.jsx)(F,{onSubmit:function(t,c){var i=c.setSubmitting;n.mutate(t),null===i||void 0===i||i(!1),e.push("/users")}})};function T(t){var e=t.user,n=t.handleEdit,c=t.handleDelete,i=t.handleDetail;return Object(p.jsxs)(p.Fragment,{children:[e.username,Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"button",onClick:function(){return i(e)},children:"detail"}),Object(p.jsx)("button",{type:"button",onClick:function(){return n(e)},children:"edit"}),Object(p.jsx)("button",{type:"button",onClick:function(){return c(e)},children:"delete"})]})}var H=function(){var t,e,n=Object(x.f)(),c=Object(l.b)(),i=Object(m.a)("users",(function(){return d.get("/api/v1/users").then((function(t){return t.data}))})),r=Object(O.a)((function(t){var e=t.id;return d.delete("/api/v1/users/".concat(e))}),{onSuccess:function(){c.invalidateQueries("users")}}),a=function(t){var e=t.id;n.push("/users/update/".concat(e))},s=function(t){var e=t.id;r.mutate({id:e})},u=function(t){var e=t.id;n.push("/users/detail/".concat(e))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:[null===(t=i.data)||void 0===t?void 0:t.length," users"]}),Object(p.jsx)("ul",{children:null===(e=i.data)||void 0===e?void 0:e.map((function(t){return Object(p.jsx)("li",{children:Object(p.jsx)(T,{user:t,handleDelete:s,handleEdit:a,handleDetail:u})},t.id)}))})]})};var U=function(){var t=Object(x.g)().id,e=Object(m.a)(["users",t],(function(){return d.get("/api/v1/users/".concat(t)).then((function(t){return t.data}))})),n=e.data;if(e.isLoading)return Object(p.jsx)("div",{children:"Loading..."});var c=n;return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:c.username}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{children:c.passwordHash}),Object(p.jsx)("br",{})]})};var R=function(){var t=Object(x.g)().id,e=Object(l.b)(),n=Object(x.f)(),c=Object(m.a)(["users",t],(function(){return d.get("/api/v1/users/".concat(t)).then((function(t){return t.data}))})),i=c.data,r=c.isLoading,a=Object(O.a)((function(e){return d.put("/api/v1/users/".concat(t),e).then((function(t){return t.data}))}),{onSuccess:function(){e.invalidateQueries("users")}});if(r)return Object(p.jsx)("div",{children:"Loading..."});var s=i;return Object(p.jsx)(F,{user:s,onSubmit:function(t,e){var c=e.setSubmitting;a.mutate(t),null===c||void 0===c||c(!1),n.push("/users")}})},V=n(23),P=n.n(V),J=n(30),B=n(31);var I=function(){var t=Object(c.useState)(""),e=Object(B.a)(t,2),n=e[0],i=e[1],r=Object(x.f)(),a=Object(l.b)(),s=function(t,e){var n=e.setSubmitting;if(t.response&&t.response.data){var c=t.response.data.error;c&&i(c)}null===n||void 0===n||n(!1)},u=function(){var t=Object(J.a)(P.a.mark((function t(e,n){var c;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.setSubmitting,t.prev=1,t.next=4,d.post("/auth/login",e);case 4:return null===c||void 0===c||c(!1),t.next=7,a.invalidateQueries("user");case 7:r.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),s(t.t0,{setSubmitting:c});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(p.jsx)(h.c,{initialValues:{username:"",password:""},validate:function(){return{}},onSubmit:u,children:function(t){var e=t.isSubmitting;return Object(p.jsxs)(h.b,{children:[Object(p.jsx)(h.a,{type:"text",name:"username",placeholder:"Username"}),Object(p.jsx)(h.a,{type:"password",name:"password",placeholder:"Password"}),n&&Object(p.jsx)("div",{children:n}),Object(p.jsx)("button",{type:"submit",disabled:e,children:"Login"})]})}})};var M=function(){var t=Object(c.useState)(""),e=Object(B.a)(t,2),n=e[0],i=e[1],r=function(){var t=Object(J.a)(P.a.mark((function t(e,n){var c,r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.setSubmitting,t.prev=1,t.next=4,d.post("/auth/register",e);case 4:null===c||void 0===c||c(!1),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.response&&t.t0.response.data&&(r=t.t0.response.data.error)&&i(r),null===c||void 0===c||c(!1);case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(p.jsx)(h.c,{initialValues:{username:"",email:"",password:"",passwordConfirm:""},validate:function(){return{}},onSubmit:r,children:function(t){var e=t.isSubmitting;return Object(p.jsxs)(h.b,{children:[Object(p.jsx)(h.a,{type:"text",name:"username",placeholder:"Username"}),Object(p.jsx)(h.a,{type:"text",name:"email",placeholder:"Email"}),Object(p.jsx)(h.a,{type:"password",name:"password",placeholder:"Password"}),Object(p.jsx)(h.a,{type:"password",name:"passwordConfirm",placeholder:"Confirm password"}),n&&Object(p.jsx)("div",{children:n}),Object(p.jsx)("button",{type:"submit",disabled:e,children:"Register"})]})}})},q=n(7);var z=function(){return Object(m.a)("user",(function(){return d.get("/auth/me")}),{retry:!1}).data,Object(c.useEffect)((function(){j(u)||b.get("/auth/csrf").then((function(){b.defaults.headers[o]=j(u)})).catch((function(t){console.warn("Received error while fetching CSRF token :",t)}))}),[]),Object(p.jsxs)(q.a,{children:[Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{className:"flex",children:[Object(p.jsxs)("li",{children:[Object(p.jsx)(q.b,{to:"/",children:"Home"}),Object(p.jsx)("br",{})]}),Object(p.jsxs)("li",{className:"ml-10",children:[Object(p.jsx)(q.b,{to:"/login",children:"Login"}),Object(p.jsx)("br",{}),Object(p.jsx)(q.b,{to:"/register",children:"Register"}),Object(p.jsx)("br",{})]}),Object(p.jsxs)("li",{className:"ml-10",children:[Object(p.jsx)(q.b,{to:"/toys",children:"Toys"}),Object(p.jsx)("br",{}),Object(p.jsx)(q.b,{to:"/toys/create",children:"Create a Toy"}),Object(p.jsx)("br",{})]}),Object(p.jsxs)("li",{className:"ml-10",children:[Object(p.jsx)(q.b,{to:"/tickets",children:"Tickets"}),Object(p.jsx)("br",{}),Object(p.jsx)(q.b,{to:"/tickets/create",children:"Create a Ticket"}),Object(p.jsx)("br",{})]}),Object(p.jsxs)("li",{className:"ml-10",children:[Object(p.jsx)(q.b,{to:"/users",children:"Users"}),Object(p.jsx)("br",{}),Object(p.jsx)(q.b,{to:"/users/create",children:"Create a User"}),Object(p.jsx)("br",{})]})]})}),Object(p.jsxs)("main",{children:[Object(p.jsx)(x.a,{path:"/toys",children:Object(p.jsx)("h1",{children:"Toys"})}),Object(p.jsx)(x.a,{path:"/tickets",children:Object(p.jsx)("h1",{children:"Tickets"})}),Object(p.jsx)(x.a,{path:"/users",children:Object(p.jsx)("h1",{children:"Users"})}),Object(p.jsxs)(x.c,{children:[Object(p.jsx)(x.a,{path:"/toys/create",component:f}),Object(p.jsx)(x.a,{path:"/toys/update/:id",component:S}),Object(p.jsx)(x.a,{path:"/toys/detail/:id",component:k}),Object(p.jsx)(x.a,{path:"/toys",component:y}),",",Object(p.jsx)(x.a,{path:"/tickets/create",component:C}),Object(p.jsx)(x.a,{path:"/tickets/update/:id",component:E}),Object(p.jsx)(x.a,{path:"/tickets/detail/:id",component:Q}),Object(p.jsx)(x.a,{path:"/tickets",component:D}),",",Object(p.jsx)(x.a,{path:"/users/create",component:N}),Object(p.jsx)(x.a,{path:"/users/update/:id",component:R}),Object(p.jsx)(x.a,{path:"/users/detail/:id",component:U}),Object(p.jsx)(x.a,{path:"/users",component:H}),Object(p.jsx)(x.a,{path:"/login",component:I}),Object(p.jsx)(x.a,{path:"/register",component:M})]})]})]})},A=new(n(82).a);a.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(l.a,{client:A,children:Object(p.jsx)(z,{})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.024e97cb.chunk.js.map